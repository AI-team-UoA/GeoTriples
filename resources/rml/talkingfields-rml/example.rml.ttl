@prefix rr: <http://www.w3.org/ns/r2rml#>.
@prefix  rml: <http://semweb.mmlab.be/ns/rml#> .
@prefix ql: <http://semweb.mmlab.be/ns/ql#> .
@prefix tfo: <http://data.linkedeodata.eu/talking-fields/ontology#>.
@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.
@prefix ex: <http://www.example.com/> .
@base <http://example.com/base> .
@prefix rrx: <http://www.w3.org/ns/r2rml-ext#>.
@prefix rrxf: <http://www.w3.org/ns/r2rml-ext/functions/def/>.
@prefix ogc: <http://www.opengis.net/ont/geosparql#>.
@prefix aaa: <http://www.myphotos.org/> .
@prefix gml: <http://www.opengis.net/gml/> . 


<#FieldAttributes>
rml:logicalSource [ 
	rml:source "../resources/rml/talkingfields-rml/Intern_Schallermayer_TFB_TFZ.xml";
        rml:referenceFormulation ql:XPath;
	rml:iterator "/TFServices/Farm/Field";
];
rr:subjectMap [
        rr:template "http://data.linkedeodata.eu/talking-fields/Intern_Schallermayer_TFB_TFZ/Field/id/{@ID}"; 
        rr:class tfo:Field;
            ];
	rr:predicateObjectMap [
                     rr:predicate tfo:hasName;
                     rr:objectMap [ 
			rr:template "{@Name}";
			rr:datatype xsd:string;
		];
    ] ;
    rr:predicateObjectMap [
                     rr:predicate tfo:hasFM_Area;
                     rr:objectMap [ 
			rr:template "{@FM_area}";
			rr:datatype xsd:double;
		];
    ] ;
    rr:predicateObjectMap [
                     rr:predicate tfo:hasUsage;
                     rr:objectMap [ 
			rr:template "{@usage}";
			rr:datatype xsd:integer;
		];
    ] ;
    rr:predicateObjectMap [
                     rr:predicate tfo:hasClientID;
                     rr:objectMap [ 
			rr:template "{@ClientID}";
			rr:datatype xsd:integer;
		];
    ] ;
    rr:predicateObjectMap [
                     rr:predicate tfo:hasMainPeriod;
                     rr:objectMap [ 
			rr:template "{@mainperiod}";
			rr:datatype xsd:integer;
		];
    ] ;
    rr:predicateObjectMap [
                     rr:predicate tfo:hasSubPeriod;
                     rr:objectMap [ 
			rr:template "{@subperiod}";
			rr:datatype xsd:integer;
		];
    ] ;
	rr:predicateObjectMap [
                     rr:predicate tfo:dimis;
                     rr:objectMap [
                        rml:reference "fn:concat(@FM_area,'ff')";
                        rr:datatype xsd:string;
                ];
    ] ;
    rr:predicateObjectMap [
                     rr:predicate tfo:hasWatering;
                     rr:objectMap [ 
			rr:template "{@watering}";
			rr:datatype xsd:boolean;
		];
    ] ;
    rr:predicateObjectMap [
        rr:predicate tfo:hasRasterCell;
        rr:objectMap [ rr:template "http://data.linkedeodata.eu/talking-fields/Intern_Schallermayer_TFB_TFZ/RasterCell/id/{./rc/@x}-{./rc/@y}";];
    ].
    
    
    
<#RasterCellAtrributes>
rml:logicalSource [ 
	rml:source "../resources/rml/talkingfields-rml/Intern_Schallermayer_TFB_TFZ.xml";
        rml:referenceFormulation ql:XPath;
	rml:iterator "/TFServices/Farm/Field/rc";
];
rr:subjectMap [
        rr:template "http://data.linkedeodata.eu/talking-fields/Intern_Schallermayer_TFB_TFZ/RasterCell/id/{@x}-{@y}"; 
        rr:class tfo:RasterCell;
            ];
	rr:predicateObjectMap [
                     rr:predicate tfo:hasCV;
                     rr:objectMap [ 
			rr:template "{@cv}";
			rr:datatype xsd:double;
		];
    ];
    rr:predicateObjectMap [
                     rr:predicate tfo:hasVigor;
                     rr:objectMap [ 
			rml:reference "./results/vigor/@value";
			rr:datatype xsd:double;
		];
    ] ;
    rr:predicateObjectMap [
                     rr:predicate tfo:hasGeometry;
			        rr:objectMap [ rr:template "http://data.linkedeodata.eu/talking-fields/Intern_Schallermayer_TFB_TFZ/Geometry/{@x}-{@y}";];
    ] ;
    rr:predicateObjectMap [
                     rr:predicate tfo:hasGeo;
                     rr:objectMap 
					[
 #                    rr:transformation [ rr:function rrxf:asWKT; rr:argumentMap [
                    rml:reference "gml:Polygon"
                ]; #];
                #]
    ] 
    .
    
